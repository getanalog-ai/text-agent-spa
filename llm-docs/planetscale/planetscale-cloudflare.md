<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><meta name="theme-color" content="#111111"/><meta name="user-signed-in" content="false"/><title>Integrate Cloudflare Workers with PlanetScale — PlanetScale</title><meta name="description" content="A guide on how to natively integrate your PlanetScale database into Cloudflare workers easily and securely."/><meta name="robots"/><meta property="og:url" content="https://planetscale.com/blog/integrate-cloudflare-workers-with-planetscale"/><meta property="og:type" content="website"/><meta property="og:title" content="Integrate Cloudflare Workers with PlanetScale — PlanetScale"/><meta property="og:image" content="https://planetscale.com/assets/integrate-cloudflare-workers-with-planetscale-social-CHrcioVB.png"/><meta property="og:description" content="A guide on how to natively integrate your PlanetScale database into Cloudflare workers easily and securely."/><meta property="twitter:card" content="summary_large_image"/><meta property="twitter:site" content="@PlanetScale"/><meta property="twitter:creator" content="@PlanetScale"/><meta property="twitter:url" content="https://planetscale.com/blog/integrate-cloudflare-workers-with-planetscale"/><meta property="twitter:title" content="Integrate Cloudflare Workers with PlanetScale — PlanetScale"/><meta property="twitter:description" content="A guide on how to natively integrate your PlanetScale database into Cloudflare workers easily and securely."/><meta property="twitter:image" content="https://planetscale.com/assets/integrate-cloudflare-workers-with-planetscale-social-CHrcioVB.png"/><link rel="canonical" href="https://planetscale.com/blog/integrate-cloudflare-workers-with-planetscale"/><link rel="stylesheet" href="/assets/styles-Vom4wfE-.css"/><link rel="preconnect" href="https://planetscale-images.imgix.net"/><link rel="icon" href="/favicon.ico" type="image/x-icon" sizes="16x16"/><link rel="icon" href="/icon.png" type="image/png" sizes="32x32"/><link rel="apple-touch-icon" href="/apple-touch-icon.png" type="image/png" sizes="32x32"/><link rel="manifest" href="/manifest.webmanifest"/><script nonce="2OMH2AkgDpKZYl8kvjGSV+DH+quuUexfTZ9tbK/TqjY=">window.ENV = {"ALGOLIA_APP_ID":"RIQSD6RS4P","ALGOLIA_INDEX_NAME":"planetscale_com_riqsd6rs4p_docs","ALGOLIA_PUBLIC_API_KEY":"3f0bb994fd8c60f955929fe30780e133","COMMIT_SHA":"eb17a6e897421fee696ae58900ff9eb8b0110f6e","IMAGE_CDN":"https://planetscale-images.imgix.net","IMAGE_CDN_ENABLED":"true","INTERNAL_API":"https://api.planetscale.com","SENTRY_DSN":"https://bd81903b44804e22a06bdc0c1a91b303@o499952.ingest.us.sentry.io/4504531942572032"}</script></head><body><div class="bg-postgres px-3 py-1 text-center font-medium text-white dark:font-semibold dark:text-black"><span><a class="text-white underline decoration-blue-400 decoration-dotted underline-offset-4 hover:underline hover:decoration-solid dark:text-black dark:decoration-blue-700" data-discover="true" href="/blog/planetscale-for-postgres">PlanetScale for Postgres</a> <!-- -->is here.</span> <span class="whitespace-nowrap"><a class="whitespace-nowrap bg-white px-sm font-semibold text-postgres dark:bg-black dark:text-blue" data-discover="true" href="/postgres">Request early access</a> </span></div><header class="relative mb-6 mt-4 bg-primary"><div class="flex flex-col gap-y-3 px-3 sm:px-5 container max-w-7xl"><div class="grid w-full grid-cols-[auto_1fr] grid-rows-1 @container lg:grid-rows-2 lg:gap-3 xl:grid-rows-1"><a aria-label="Go to homepage" class="col-start-1 col-end-2 h-4 w-4 rounded-full text-primary lg:hidden" data-discover="true" href="/"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" fill="none" viewBox="0 0 40 40"><path fill="currentColor" d="M0 20C0 8.954 8.954 0 20 0c8.121 0 15.112 4.84 18.245 11.794l-26.45 26.45a20 20 0 0 1-3.225-1.83L24.984 20H20L5.858 34.142A19.94 19.94 0 0 1 0 20M39.999 20.007 20.006 40c11.04-.004 19.99-8.953 19.993-19.993"></path></svg></a><div class="group col-start-2 col-end-3 flex items-center justify-end gap-1.5 xl:row-start-1 xl:gap-3"><div class="flex items-center gap-1"><a href="https://auth.planetscale.com/sign-in" class="font-semibold text-primary hover:text-orange">Log in</a><div class="hidden gap-1 @md:inline-flex"><span class="text-decoration">|</span><a href="https://auth.planetscale.com/sign-up" class="font-semibold text-primary hover:text-orange">Get started</a></div><span class="text-decoration">|</span><a class="btn !h-[32px] !px-1 font-semibold" data-discover="true" href="/contact">Book a meeting</a></div></div><div class="col-start-1 col-end-3 flex items-center gap-x-3 xl:col-end-2 xl:row-start-1"><a aria-label="Go to homepage" class="col-start-1 col-end-2 hidden h-4 w-4 rounded-full text-primary lg:block" data-discover="true" href="/"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" fill="none" viewBox="0 0 40 40"><path fill="currentColor" d="M0 20C0 8.954 8.954 0 20 0c8.121 0 15.112 4.84 18.245 11.794l-26.45 26.45a20 20 0 0 1-3.225-1.83L24.984 20H20L5.858 34.142A19.94 19.94 0 0 1 0 20M39.999 20.007 20.006 40c11.04-.004 19.99-8.953 19.993-19.993"></path></svg></a><nav aria-label="Main" data-orientation="horizontal" class="hidden items-center lg:flex"><ul class="flex flex-wrap gap-x-1 md:flex-nowrap"><li><a class="font-semibold text-primary transition hover:text-contrast" data-discover="true" href="/docs">Documentation</a></li><li class="text-decoration" role="presentation">|</li><li><a class="font-semibold text-primary transition hover:text-contrast" data-discover="true" href="/case-studies">Case studies</a></li><li class="text-decoration" role="presentation">|</li><li><a class="font-semibold text-primary transition hover:text-contrast" data-discover="true" href="/features">Features</a></li><li class="text-decoration" role="presentation">|</li><li><a class="font-semibold text-primary transition hover:text-contrast" data-discover="true" href="/blog">Blog</a></li><li class="text-decoration" role="presentation">|</li><li><a class="font-semibold text-primary transition hover:text-contrast" data-discover="true" href="/metal">Metal</a></li><li class="text-decoration" role="presentation">|</li><li><a class="font-semibold text-primary transition hover:text-contrast" data-discover="true" href="/pricing">Pricing</a></li><li class="text-decoration" role="presentation">|</li><li><a class="font-semibold text-primary transition hover:text-contrast" data-discover="true" href="/contact">Contact</a></li></ul></nav></div></div><details class="lg:hidden"><summary>Navigation</summary><nav class="dashed-box mt-1 p-3"><ul class="flex flex-wrap gap-x-1 md:flex-nowrap"><li><a class="font-semibold text-primary transition hover:text-contrast" data-discover="true" href="/docs">Documentation</a></li><li class="text-decoration" role="presentation">|</li><li><a class="font-semibold text-primary transition hover:text-contrast" data-discover="true" href="/case-studies">Case studies</a></li><li class="text-decoration" role="presentation">|</li><li><a class="font-semibold text-primary transition hover:text-contrast" data-discover="true" href="/features">Features</a></li><li class="text-decoration" role="presentation">|</li><li><a class="font-semibold text-primary transition hover:text-contrast" data-discover="true" href="/blog">Blog</a></li><li class="text-decoration" role="presentation">|</li><li><a class="font-semibold text-primary transition hover:text-contrast" data-discover="true" href="/metal">Metal</a></li><li class="text-decoration" role="presentation">|</li><li><a class="font-semibold text-primary transition hover:text-contrast" data-discover="true" href="/pricing">Pricing</a></li><li class="text-decoration" role="presentation">|</li><li><a class="font-semibold text-primary transition hover:text-contrast" data-discover="true" href="/contact">Contact</a></li></ul></nav></details></div></header><main class="container my-6 flex max-w-7xl flex-col px-3 sm:px-5 lg:px-12"><section class=""><p class="block"><a class="pr-sm text-primary hover:text-contrast" data-discover="true" href="/blog">Blog</a><span class="px-sm text-decoration">|</span><a data-discover="true" class="px-sm text-purple hover:bg-purple-100 hover:text-purple dark:hover:bg-purple-900" href="/blog/category/tutorials">Tutorials</a></p><div class="flex lg:flex-row-reverse lg:gap-x-6"><div><button class="absolute right-0 block bg-gray-100 px-sm lg:hidden dark:bg-gray-800 -mt-9"><span class="inline">Table of contents «</span><span class="hidden">Close »</span></button><aside class="tree-nav w-full shrink-0 space-y-3 lg:w-36 hidden lg:block"><div><h4 class="text-secondary">Table of contents</h4><ul><li><a class="font-semibold text-primary hover:text-blue" data-discover="true" href="/blog/integrate-cloudflare-workers-with-planetscale#set-up-the-database">Set up the database</a></li><li><a class="font-semibold text-primary hover:text-blue" data-discover="true" href="/blog/integrate-cloudflare-workers-with-planetscale#create-a-cloudflare-worker">Create a Cloudflare Worker</a></li><li><a class="font-semibold text-primary hover:text-blue" data-discover="true" href="/blog/integrate-cloudflare-workers-with-planetscale#configure-the-planetscale-integration">Configure the PlanetScale integration</a></li><li><a class="font-semibold text-primary hover:text-blue" data-discover="true" href="/blog/integrate-cloudflare-workers-with-planetscale#test-the-integration">Test the integration</a></li><li><a class="font-semibold text-primary hover:text-blue" data-discover="true" href="/blog/integrate-cloudflare-workers-with-planetscale#conclusion">Conclusion</a></li></ul><div class="mb-3 mt-6 border bg-blue-50 p-3 font-semibold text-contrast dark:bg-blue-900"><p>Want to learn more about unlimited IOPS w/ Metal for Postgres and Vitess?</p><p><a data-discover="true" href="/contact">Talk to Solutions</a></p></div><p>Get the <a href="/blog/feed.atom">RSS feed</a></p></div></aside></div><article class="min-w-0 flex-grow"><h1>Integrate Cloudflare Workers with PlanetScale</h1><p class="text-secondary">By <!-- -->Brian Morrison II<!-- --> | <time dateTime="2023-05-17T12:00:00Z">May 17, 2023</time></p><p>Over the past several weeks, we’ve been working with <a href="https://blog.cloudflare.com/announcing-database-integrations/">Cloudflare on a direct integration</a> between our services to make it easier and more secure when connecting to your PlanetScale database from <a href="https://workers.cloudflare.com/">Cloudflare Workers</a>. With the integration enabled, Cloudflare will automatically connect to your PlanetScale database to generate credentials that are managed by Cloudflare. Read on to learn how you can use the new integration with your Cloudflare Workers, or check out this video on our <a href="https://youtube.com/@planetscale">YouTube channel</a> where we cover it as well!</p><iframe allow="autoplay; fullscreen; picture-in-picture" src="https://www.youtube-nocookie.com/embed/K21jb_yv33Y?rel=0&amp;color=white" title="Integrate Cloudflare Workers with PlanetScale"></iframe><p>Before you get started, make sure you have the following:</p><ul><li>A PlanetScale account</li><li>The <a href="/docs/cli">pscale CLI</a> installed and configured</li><li>The latest version of NodeJS installed</li></ul><h2 id="set-up-the-database"><a href="#set-up-the-database">Set up the database</a></h2><p>Start by creating a database in your PlanetScale account named <code>bookings_db</code>.</p><pre data-language="bash">pscale database create bookings_db
</pre><p>Next, use the <code>pscale shell</code> command to open a connection to the main branch of the new database.</p><pre data-language="bash">pscale shell bookings_db main
</pre><p>Finally, run the following two commands to create a table in the database and populate it with some data.</p><pre data-language="sql">CREATE TABLE hotels (
  id INT UNSIGNED PRIMARY KEY AUTO_INCREMENT,
  name VARCHAR(50) NOT NULL,
  address VARCHAR(50) NOT NULL,
  stars FLOAT(2) UNSIGNED
);

INSERT INTO hotels (name, address, stars) VALUES
  (&#x27;Hotel California&#x27;, &#x27;1967 Can Never Leave Ln, San Fancisco CA, 94016&#x27;, 7.6),
  (&#x27;The Galt House&#x27;, &#x27;140 N Fourth St, Louisville, KY 40202&#x27;, 8.0);
</pre><h2 id="create-a-cloudflare-worker"><a href="#create-a-cloudflare-worker">Create a Cloudflare Worker</a></h2><p>Start by creating a new Cloudflare Worker project by running the following command in your terminal. This demo uses a fetch handler with JavaScript, so select those options when prompted.</p><pre data-language="bash">npx wrangler init planetscale-worker
</pre><p>Next, switch to the directory and run the following commands to install the <a href="/docs/vitess/tutorials/planetscale-serverless-driver">PlanetScale Serverless Driver for JavaScript</a>:</p><pre data-language="bash">npm install @planetscale/database
</pre><p>Now update the contents of <code>src/index.js</code> to the following. This will set up the worker to connect to your PlanetScale database, read the rows from it, and display them in your browser when the public worker URL is accessed:</p><pre data-language="jsx">import { connect } from &#x27;@planetscale/database&#x27;

export default {
  async fetch(request, env) {
    const config = {
      host: env.DATABASE_HOST,
      username: env.DATABASE_USERNAME,
      password: env.DATABASE_PASSWORD,
      fetch: (url, init) =&gt; {
        delete init[&#x27;cache&#x27;]
        return fetch(url, init)
      }
    }
    const conn = connect(config)

    const data = await conn.execute(&#x27;SELECT * FROM hotels;&#x27;)
    return new Response(JSON.stringify(data.rows), {
      status: 200,
      headers: {
        &#x27;Content-Type&#x27;: &#x27;application/json&#x27;
      }
    })
  }
}
</pre><p>Finally, publish your worker by running the following command in your terminal:</p><pre data-language="bash">npx wrangler publish
</pre><h2 id="configure-the-planetscale-integration"><a href="#configure-the-planetscale-integration">Configure the PlanetScale integration</a></h2><p>Log into the Cloudflare dashboard and navigate to <strong>&quot;Workers&quot;</strong> &gt; <strong>&quot;Overview&quot;</strong>. You should see a service in the list named <strong>&quot;planetscale-worker&quot;</strong>. Select it from the list.</p><p><picture><img alt="PlanetScale Cloudflare integration wizard - step 1" loading="lazy" src="/assets/blog/content/integrate-cloudflare-workers-with-planetscale/CleanShot_2023-05-16_at_11.52.48.png"/></picture></p><p>Next, select the <strong>&quot;Settings&quot;</strong> tab, then <strong>&quot;Integrations&quot;</strong>, and finally <strong>&quot;Add Integration&quot;</strong> in the PlanetScale card.</p><p><picture><img alt="PlanetScale Cloudflare integration wizard - step 2" loading="lazy" src="/assets/blog/content/integrate-cloudflare-workers-with-planetscale/CleanShot_2023-05-16_at_11.51.19.png"/></picture></p><p>You’ll be presented with a wizard to configure the integration. Start by clicking <strong>&quot;Accept&quot;</strong> under <strong>Review and grant permissions</strong>.</p><p><picture><img alt="PlanetScale Cloudflare integration wizard - step 3" loading="lazy" src="/assets/blog/content/integrate-cloudflare-workers-with-planetscale/CleanShot_2023-05-16_at_11.55.06.png"/></picture></p><p>Under <strong>Connect to PlanetScale</strong>, click <strong>&quot;Connect&quot;</strong> to start the process of connecting your PlanetScale and Cloudflare accounts.</p><p><picture><img alt="PlanetScale Cloudflare integration wizard - step 4" loading="lazy" src="/assets/blog/content/integrate-cloudflare-workers-with-planetscale/CleanShot_2023-05-16_at_11.56.11.png"/></picture></p><p>A modal will appear allowing you to grant access to your organization, database, and branch. Start by selecting your organization from the list. The org I’m working with is named “ps-deved”.</p><p><picture><img alt="PlanetScale Cloudflare integration wizard - step 5" loading="lazy" src="/assets/blog/content/integrate-cloudflare-workers-with-planetscale/CleanShot_2023-05-16_at_11.59.44.png"/></picture></p><p>Next, select the “bookings_db” database from the list in the <strong>Databases</strong> card, and the “main” branch from the list in the <strong>Branches</strong> card. Finally, click <strong>&quot;Authorize access&quot;</strong>.</p><p><picture><img alt="PlanetScale Cloudflare integration wizard - step 6" loading="lazy" src="/assets/blog/content/integrate-cloudflare-workers-with-planetscale/CleanShot_2023-05-16_at_12.00.34.png"/></picture></p><p>In the next step on the parent form, select your organization again from the list and click <strong>&quot;Continue&quot;</strong>.</p><p><picture><img alt="PlanetScale Cloudflare integration wizard - step 7" loading="lazy" src="/assets/blog/content/integrate-cloudflare-workers-with-planetscale/CleanShot_2023-05-16_at_12.01.32.png"/></picture></p><p>Then, select your database and the <a href="/docs/vitess/security/password-roles">user role</a> you want the integration to have.</p><p><picture><img alt="PlanetScale Cloudflare integration wizard - step 8" loading="lazy" src="/assets/blog/content/integrate-cloudflare-workers-with-planetscale/CleanShot_2023-05-16_at_12.02.29.png"/></picture></p><p>Next, select the “main” branch from the list and click <strong>&quot;Continue&quot;</strong>.</p><p><picture><img alt="PlanetScale Cloudflare integration wizard - step 9" loading="lazy" src="/assets/blog/content/integrate-cloudflare-workers-with-planetscale/CleanShot_2023-05-16_at_12.03.07.png"/></picture></p><p>Finally, you’ll be given the option to rename the secrets that will be configured on your behalf. These can be left as is. Click <strong>&quot;Add Integration&quot;</strong> to complete the process.</p><p><picture><img alt="" loading="lazy" src="/assets/blog/content/integrate-cloudflare-workers-with-planetscale/CleanShot_2023-05-16_at_13.33.05.png"/></picture></p><h2 id="test-the-integration"><a href="#test-the-integration">Test the integration</a></h2><p>Back in the overview of the worker, there is a preview URL that you can use to open a new tab in your browser that runs the worker and displays the results. Once you’ve located the preview URL, click it to test the worker.</p><p><picture><img alt="" loading="lazy" src="/assets/blog/content/integrate-cloudflare-workers-with-planetscale/CleanShot_2023-05-16_at_13.03.41.png"/></picture></p><h2 id="conclusion"><a href="#conclusion">Conclusion</a></h2><p>With the new PlanetScale Integration in Cloudflare Workers, you can now easily create credentials without ever having to handle them manually, making it both easier and more secure when using the platforms together. For more information, check out the <a href="https://developers.cloudflare.com/workers/learning/integrations/databases/#planetscale">Cloudflare database integrations documentation</a>.</p><p>Have you ever built anything with PlanetScale and Cloudflare? Share it on Twitter and be sure to tag <a href="https://twitter.com/planetscale">@planetscale</a> and <a href="https://twitter.com/cloudflaredev">@cloudflaredev</a>!</p></article></div></section></main><footer class="my-6 px-3 sm:px-5 container max-w-7xl"><nav class="grid grid-cols-1 text-left sm:grid-cols-2 lg:grid-cols-5 lg:mx-7"><div class="dashed-box dashed-box-x-t sm:dashed-box-l-t lg:dashed-box-y-l p-3"><h2 class="font-semibold">Company</h2><a class="block pl-1ch -indent-1ch text-primary hover:text-contrast" data-discover="true" href="/about">About</a><a class="block pl-1ch -indent-1ch text-primary hover:text-contrast" data-discover="true" href="/blog">Blog</a><a class="block pl-1ch -indent-1ch text-primary hover:text-contrast" data-discover="true" href="/changelog">Changelog</a><a class="block pl-1ch -indent-1ch text-primary hover:text-contrast" data-discover="true" href="/careers">Careers</a></div><div class="dashed-box dashed-box-x-t lg:dashed-box-y-l p-3"><h2 class="font-semibold">Product</h2><a class="block pl-1ch -indent-1ch text-primary hover:text-contrast" data-discover="true" href="/case-studies">Case studies</a><a class="block pl-1ch -indent-1ch text-primary hover:text-contrast" data-discover="true" href="/enterprise">Enterprise</a><a class="block pl-1ch -indent-1ch text-primary hover:text-contrast" data-discover="true" href="/pricing">Pricing</a></div><div class="dashed-box dashed-box-x-t sm:dashed-box-l-t lg:dashed-box-y-l p-3"><h2 class="font-semibold">Resources</h2><a class="block pl-1ch -indent-1ch text-primary hover:text-contrast" data-discover="true" href="/docs">Documentation</a><a class="block pl-1ch -indent-1ch text-primary hover:text-contrast" href="https://support.planetscale.com/hc/en-us" rel="nofollow noopener noreferrer" target="_blank">Support</a><a class="block pl-1ch -indent-1ch text-primary hover:text-contrast" href="https://planetscalestatus.com" rel="nofollow noopener noreferrer" target="_blank">Status</a><a class="block pl-1ch -indent-1ch text-primary hover:text-contrast" href="https://trust.planetscale.com" rel="nofollow noopener noreferrer" target="_blank">Trust Center</a></div><div class="dashed-box dashed-box-x-t lg:dashed-box-y-l p-3"><h2 class="font-semibold">Courses</h2><a class="block pl-1 -indent-1 text-primary hover:text-contrast" data-discover="true" href="/learn/courses/database-scaling/introduction/course-introduction">Database Scaling</a><a class="block pl-1ch -indent-1ch text-primary hover:text-contrast" data-discover="true" href="/learn/courses/vitess">Learn Vitess</a><a class="block pl-1ch -indent-1ch text-primary hover:text-contrast" data-discover="true" href="/learn/courses/mysql-for-developers">MySQL for Developers</a></div><div class="dashed-box p-3 sm:col-span-2 lg:col-span-1"><h2 class="font-semibold text-primary hover:text-contrast">Open source</h2><a class="block pl-1ch -indent-1ch text-primary hover:text-contrast" data-discover="true" href="/vitess">Vitess</a><a class="block pl-1ch -indent-1ch text-primary hover:text-contrast" href="https://vitess.io/slack" rel="nofollow noopener noreferrer" target="_blank">Vitess community</a><a class="block pl-1ch -indent-1ch text-primary hover:text-contrast" href="https://github.com/planetscale" rel="me nofollow noopener noreferrer" target="_blank">GitHub</a></div></nav><div class="dashed-box dashed-box-x-b p-3 lg:mx-7"><p class="mb-3 md:mb-0"><a class="text-primary" rel="nofollow" data-discover="true" href="/legal/privacy">Privacy</a><span class="text-decoration" role="presentation"> <!-- -->|<!-- --> </span><a class="text-primary" rel="nofollow" data-discover="true" href="/legal/siteterms">Terms</a><span class="text-decoration" role="presentation"> <!-- -->|<!-- --> </span><a class="text-primary" rel="nofollow" data-discover="true" href="/legal/cookies">Cookies</a><span class="text-decoration" role="presentation"> <!-- -->|<!-- --> </span><a class="text-primary" rel="nofollow" data-discover="true" href="/legal/privacy#privacy-rights-and-choices">Do Not Share My Personal Information</a></p><p class="text-secondary">© <!-- -->2025<!-- --> PlanetScale, Inc. All rights reserved.</p></div><p class="mb-0 mt-3 break-normal lg:mx-7"><a class="text-primary" href="https://github.com/planetscale" rel="me nofollow noopener noreferrer" target="_blank">GitHub</a><span class="text-decoration" role="presentation"> <!-- -->|<!-- --> </span><a aria-label="X (formerly Twitter)" class="text-primary" href="https://twitter.com/planetscale" rel="me nofollow noopener noreferrer" target="_blank">X</a><span class="text-decoration" role="presentation"> <!-- -->|<!-- --> </span><a aria-label="LinkedIn" class="text-primary" href="https://www.linkedin.com/company/planetscale" target="_blank" rel="noreferrer">LinkedIn</a><span class="text-decoration" role="presentation"> <!-- -->|<!-- --> </span><a class="text-primary" href="https://www.youtube.com/planetscale" rel="me nofollow noopener noreferrer" target="_blank">YouTube</a><span class="text-decoration" role="presentation"> <!-- -->|<!-- --> </span><a class="text-primary" href="https://www.facebook.com/planetscaledata" rel="me nofollow noopener noreferrer" target="_blank">Facebook</a></p></footer><script nonce="2OMH2AkgDpKZYl8kvjGSV+DH+quuUexfTZ9tbK/TqjY=">((STORAGE_KEY, restoreKey) => {
    if (!window.history.state || !window.history.state.key) {
      let key = Math.random().toString(32).slice(2);
      window.history.replaceState({
        key
      }, "");
    }
    try {
      let positions = JSON.parse(sessionStorage.getItem(STORAGE_KEY) || "{}");
      let storedY = positions[restoreKey || window.history.state.key];
      if (typeof storedY === "number") {
        window.scrollTo(0, storedY);
      }
    } catch (error) {
      console.error(error);
      sessionStorage.removeItem(STORAGE_KEY);
    }
  })("positions", null)</script><link rel="modulepreload" href="/assets/entry.client-ss-u8IvR.js"/><link rel="modulepreload" href="/assets/components-HBMewZZM.js"/><link rel="modulepreload" href="/assets/performance-NP-jkmMG.js"/><link rel="modulepreload" href="/assets/learn.courses.sitemap_.xml_-AarYA7wp.js"/><link rel="modulepreload" href="/assets/analytics.client-BfzOrA-Y.js"/><link rel="modulepreload" href="/assets/Search-BsMrxj8U.js"/><link rel="modulepreload" href="/assets/SiteHeader-C227t5Vi.js"/><link rel="modulepreload" href="/assets/current-D-lfR-hb.js"/><link rel="modulepreload" href="/assets/index-C7qoBYcl.js"/><link rel="modulepreload" href="/assets/root-C-09S_IL.js"/><link rel="modulepreload" href="/assets/blog-BWrPRzmQ.js"/><link rel="modulepreload" href="/assets/index-Koa9xEvp.js"/><link rel="modulepreload" href="/assets/BlogCategoryLink-BQle3pC2.js"/><link rel="modulepreload" href="/assets/Callout-DSYAcqve.js"/><link rel="modulepreload" href="/assets/Details-D6P6azaC.js"/><link rel="modulepreload" href="/assets/Skittle-6cmakTer.js"/><link rel="modulepreload" href="/assets/SiteFooter-Bym_yXHB.js"/><link rel="modulepreload" href="/assets/Vimeo-B1iQa3hm.js"/><link rel="modulepreload" href="/assets/YouTube-DOM4Nxxq.js"/><link rel="modulepreload" href="/assets/date-BvUEXjxK.js"/><link rel="modulepreload" href="/assets/types-CebHBZ4B.js"/><link rel="modulepreload" href="/assets/blog._slug-rm3TE1AT.js"/><script nonce="2OMH2AkgDpKZYl8kvjGSV+DH+quuUexfTZ9tbK/TqjY=">window.__remixContext = {"basename":"/","future":{"v3_fetcherPersist":true,"v3_relativeSplatPath":true,"v3_throwAbortReason":true,"v3_routeConfig":true,"v3_singleFetch":true,"v3_lazyRouteDiscovery":true,"unstable_optimizeDeps":true},"isSpaMode":false};window.__remixContext.stream = new ReadableStream({start(controller){window.__remixContext.streamController = controller;}}).pipeThrough(new TextEncoderStream());</script><script nonce="2OMH2AkgDpKZYl8kvjGSV+DH+quuUexfTZ9tbK/TqjY=" type="module" async="">;
import * as route0 from "/assets/root-C-09S_IL.js";
import * as route1 from "/assets/blog-BWrPRzmQ.js";
import * as route2 from "/assets/blog._slug-rm3TE1AT.js";
window.__remixManifest = {
  "entry": {
    "module": "/assets/entry.client-ss-u8IvR.js",
    "imports": [
      "/assets/components-HBMewZZM.js",
      "/assets/performance-NP-jkmMG.js",
      "/assets/learn.courses.sitemap_.xml_-AarYA7wp.js"
    ],
    "css": []
  },
  "routes": {
    "root": {
      "id": "root",
      "path": "",
      "hasAction": false,
      "hasLoader": true,
      "hasClientAction": false,
      "hasClientLoader": false,
      "hasErrorBoundary": true,
      "module": "/assets/root-C-09S_IL.js",
      "imports": [
        "/assets/components-HBMewZZM.js",
        "/assets/performance-NP-jkmMG.js",
        "/assets/learn.courses.sitemap_.xml_-AarYA7wp.js",
        "/assets/analytics.client-BfzOrA-Y.js",
        "/assets/Search-BsMrxj8U.js",
        "/assets/SiteHeader-C227t5Vi.js",
        "/assets/current-D-lfR-hb.js",
        "/assets/index-C7qoBYcl.js"
      ],
      "css": []
    },
    "routes/blog": {
      "id": "routes/blog",
      "parentId": "root",
      "path": "blog",
      "hasAction": false,
      "hasLoader": false,
      "hasClientAction": false,
      "hasClientLoader": false,
      "hasErrorBoundary": false,
      "module": "/assets/blog-BWrPRzmQ.js",
      "imports": [
        "/assets/learn.courses.sitemap_.xml_-AarYA7wp.js"
      ],
      "css": []
    },
    "routes/blog.$slug": {
      "id": "routes/blog.$slug",
      "parentId": "routes/blog",
      "path": ":slug",
      "hasAction": false,
      "hasLoader": true,
      "hasClientAction": false,
      "hasClientLoader": false,
      "hasErrorBoundary": false,
      "module": "/assets/blog._slug-rm3TE1AT.js",
      "imports": [
        "/assets/components-HBMewZZM.js",
        "/assets/index-Koa9xEvp.js",
        "/assets/index-C7qoBYcl.js",
        "/assets/BlogCategoryLink-BQle3pC2.js",
        "/assets/Callout-DSYAcqve.js",
        "/assets/Details-D6P6azaC.js",
        "/assets/Skittle-6cmakTer.js",
        "/assets/SiteFooter-Bym_yXHB.js",
        "/assets/SiteHeader-C227t5Vi.js",
        "/assets/Vimeo-B1iQa3hm.js",
        "/assets/YouTube-DOM4Nxxq.js",
        "/assets/date-BvUEXjxK.js",
        "/assets/learn.courses.sitemap_.xml_-AarYA7wp.js",
        "/assets/types-CebHBZ4B.js",
        "/assets/current-D-lfR-hb.js",
        "/assets/analytics.client-BfzOrA-Y.js"
      ],
      "css": []
    },
    "routes/_index": {
      "id": "routes/_index",
      "parentId": "root",
      "index": true,
      "hasAction": false,
      "hasLoader": true,
      "hasClientAction": false,
      "hasClientLoader": false,
      "hasErrorBoundary": false,
      "module": "/assets/_index-_wsp9EQ3.js",
      "imports": [
        "/assets/components-HBMewZZM.js",
        "/assets/social-Cd2AtOZM.js",
        "/assets/Logo-D1cFMWoZ.js",
        "/assets/SiteFooter-Bym_yXHB.js",
        "/assets/SiteHeader-C227t5Vi.js",
        "/assets/learn.courses.sitemap_.xml_-AarYA7wp.js",
        "/assets/index-C7qoBYcl.js",
        "/assets/current-D-lfR-hb.js",
        "/assets/analytics.client-BfzOrA-Y.js"
      ],
      "css": []
    },
    "routes/blog._index": {
      "id": "routes/blog._index",
      "parentId": "routes/blog",
      "index": true,
      "hasAction": false,
      "hasLoader": true,
      "hasClientAction": false,
      "hasClientLoader": false,
      "hasErrorBoundary": false,
      "module": "/assets/blog._index-tbYcdcKR.js",
      "imports": [
        "/assets/components-HBMewZZM.js",
        "/assets/social-Cd2AtOZM.js",
        "/assets/BlogCategoryLink-BQle3pC2.js",
        "/assets/BlogCategoryNav-BHJoMfoA.js",
        "/assets/Paginator-BGdX5quU.js",
        "/assets/SiteFooter-Bym_yXHB.js",
        "/assets/SiteHeader-C227t5Vi.js",
        "/assets/date-BvUEXjxK.js",
        "/assets/learn.courses.sitemap_.xml_-AarYA7wp.js",
        "/assets/index-C7qoBYcl.js",
        "/assets/types-CebHBZ4B.js",
        "/assets/enumerator-C5UBlhQs.js",
        "/assets/current-D-lfR-hb.js",
        "/assets/analytics.client-BfzOrA-Y.js"
      ],
      "css": []
    }
  },
  "url": "/assets/manifest-12945ecf.js",
  "version": "12945ecf"
};
window.__remixRouteModules = {"root":route0,"routes/blog":route1,"routes/blog.$slug":route2};

import("/assets/entry.client-ss-u8IvR.js");</script><script type="application/ld+json">{"@context":"https://schema.org","@type":"Organization","name":"PlanetScale, Inc.","url":"https://planetscale.com","sameAs":["https://twitter.com/PlanetScale","https://www.facebook.com/planetscaledata/","https://www.instagram.com/planetscale/"],"address":{"@type":"PostalAddress","streetAddress":"WeWork c/o PlanetScale, 535 Mission Street, 14th Floor","addressLocality":"San Francisco","addressRegion":"CA","postalCode":"94105","addressCountry":"US"}}</script></body></html><!--$--><script nonce="2OMH2AkgDpKZYl8kvjGSV+DH+quuUexfTZ9tbK/TqjY=">window.__remixContext.streamController.enqueue("[{\"_1\":2,\"_647\":-5,\"_648\":-5},\"loaderData\",{\"_3\":4,\"_28\":29,\"_646\":-5},\"root\",{\"_5\":6},\"current\",{\"_7\":8,\"_9\":10,\"_27\":8},\"development\",false,\"env\",{\"_11\":12,\"_13\":14,\"_15\":16,\"_17\":18,\"_19\":20,\"_21\":22,\"_23\":24,\"_25\":26},\"ALGOLIA_APP_ID\",\"RIQSD6RS4P\",\"ALGOLIA_INDEX_NAME\",\"planetscale_com_riqsd6rs4p_docs\",\"ALGOLIA_PUBLIC_API_KEY\",\"3f0bb994fd8c60f955929fe30780e133\",\"COMMIT_SHA\",\"eb17a6e897421fee696ae58900ff9eb8b0110f6e\",\"IMAGE_CDN\",\"https://planetscale-images.imgix.net\",\"IMAGE_CDN_ENABLED\",\"true\",\"INTERNAL_API\",\"https://api.planetscale.com\",\"SENTRY_DSN\",\"https://bd81903b44804e22a06bdc0c1a91b303@o499952.ingest.us.sentry.io/4504531942572032\",\"userSignedIn\",\"routes/blog.$slug\",{\"_30\":31,\"_3\":645},\"blog\",{\"_32\":33,\"_34\":35,\"_611\":612,\"_613\":-7,\"_614\":615,\"_76\":77,\"_628\":629,\"_631\":632,\"_634\":635,\"_636\":637,\"_638\":639},\"slug\",\"integrate-cloudflare-workers-with-planetscale\",\"body\",[36,70,79,84,112,125,137,145,156,161,166,172,183,188,193,205,210,221,227,232,237,248,272,291,314,328,344,358,375,389,394,408,430,444,454,468,480,494,503,517,527,541,552,557,570,581,592],[\"SingleFetchClassInstance\",37],{\"_38\":39,\"_40\":41,\"_42\":43,\"_44\":45},\"$$mdtype\",\"Tag\",\"name\",\"p\",\"attributes\",{},\"children\",[46,47,55,56,62,63,69],\"Over the past several weeks, we’ve been working with \",[\"SingleFetchClassInstance\",48],{\"_38\":39,\"_40\":49,\"_42\":50,\"_44\":53},\"a\",{\"_51\":52},\"href\",\"https://blog.cloudflare.com/announcing-database-integrations/\",[54],\"Cloudflare on a direct integration\",\" between our services to make it easier and more secure when connecting to your PlanetScale database from \",[\"SingleFetchClassInstance\",57],{\"_38\":39,\"_40\":49,\"_42\":58,\"_44\":60},{\"_51\":59},\"https://workers.cloudflare.com/\",[61],\"Cloudflare Workers\",\". With the integration enabled, Cloudflare will automatically connect to your PlanetScale database to generate credentials that are managed by Cloudflare. Read on to learn how you can use the new integration with your Cloudflare Workers, or check out this video on our \",[\"SingleFetchClassInstance\",64],{\"_38\":39,\"_40\":49,\"_42\":65,\"_44\":67},{\"_51\":66},\"https://youtube.com/@planetscale\",[68],\"YouTube channel\",\" where we cover it as well!\",[\"SingleFetchClassInstance\",71],{\"_38\":39,\"_40\":72,\"_42\":73,\"_44\":78},\"YouTube\",{\"_74\":75,\"_76\":77},\"src\",\"https://www.youtube.com/embed/K21jb_yv33Y\",\"title\",\"Integrate Cloudflare Workers with PlanetScale\",[],[\"SingleFetchClassInstance\",80],{\"_38\":39,\"_40\":41,\"_42\":81,\"_44\":82},{},[83],\"Before you get started, make sure you have the following:\",[\"SingleFetchClassInstance\",85],{\"_38\":39,\"_40\":86,\"_42\":87,\"_44\":88},\"ul\",{},[89,95,107],[\"SingleFetchClassInstance\",90],{\"_38\":39,\"_40\":91,\"_42\":92,\"_44\":93},\"li\",{},[94],\"A PlanetScale account\",[\"SingleFetchClassInstance\",96],{\"_38\":39,\"_40\":91,\"_42\":97,\"_44\":98},{},[99,100,106],\"The \",[\"SingleFetchClassInstance\",101],{\"_38\":39,\"_40\":49,\"_42\":102,\"_44\":104},{\"_51\":103},\"/docs/cli\",[105],\"pscale CLI\",\" installed and configured\",[\"SingleFetchClassInstance\",108],{\"_38\":39,\"_40\":91,\"_42\":109,\"_44\":110},{},[111],\"The latest version of NodeJS installed\",[\"SingleFetchClassInstance\",113],{\"_38\":39,\"_40\":114,\"_42\":115,\"_44\":118},\"h2\",{\"_116\":117},\"id\",\"set-up-the-database\",[119],[\"SingleFetchClassInstance\",120],{\"_38\":39,\"_40\":49,\"_42\":121,\"_44\":123},{\"_51\":122},\"#set-up-the-database\",[124],\"Set up the database\",[\"SingleFetchClassInstance\",126],{\"_38\":39,\"_40\":41,\"_42\":127,\"_44\":128},{},[129,130,136],\"Start by creating a database in your PlanetScale account named \",[\"SingleFetchClassInstance\",131],{\"_38\":39,\"_40\":132,\"_42\":133,\"_44\":134},\"code\",{},[135],\"bookings_db\",\".\",[\"SingleFetchClassInstance\",138],{\"_38\":39,\"_40\":139,\"_42\":140,\"_44\":143},\"pre\",{\"_141\":142},\"data-language\",\"bash\",[144],\"pscale database create bookings_db\\n\",[\"SingleFetchClassInstance\",146],{\"_38\":39,\"_40\":41,\"_42\":147,\"_44\":148},{},[149,150,155],\"Next, use the \",[\"SingleFetchClassInstance\",151],{\"_38\":39,\"_40\":132,\"_42\":152,\"_44\":153},{},[154],\"pscale shell\",\" command to open a connection to the main branch of the new database.\",[\"SingleFetchClassInstance\",157],{\"_38\":39,\"_40\":139,\"_42\":158,\"_44\":159},{\"_141\":142},[160],\"pscale shell bookings_db main\\n\",[\"SingleFetchClassInstance\",162],{\"_38\":39,\"_40\":41,\"_42\":163,\"_44\":164},{},[165],\"Finally, run the following two commands to create a table in the database and populate it with some data.\",[\"SingleFetchClassInstance\",167],{\"_38\":39,\"_40\":139,\"_42\":168,\"_44\":170},{\"_141\":169},\"sql\",[171],\"CREATE TABLE hotels (\\n  id INT UNSIGNED PRIMARY KEY AUTO_INCREMENT,\\n  name VARCHAR(50) NOT NULL,\\n  address VARCHAR(50) NOT NULL,\\n  stars FLOAT(2) UNSIGNED\\n);\\n\\nINSERT INTO hotels (name, address, stars) VALUES\\n  ('Hotel California', '1967 Can Never Leave Ln, San Fancisco CA, 94016', 7.6),\\n  ('The Galt House', '140 N Fourth St, Louisville, KY 40202', 8.0);\\n\",[\"SingleFetchClassInstance\",173],{\"_38\":39,\"_40\":114,\"_42\":174,\"_44\":176},{\"_116\":175},\"create-a-cloudflare-worker\",[177],[\"SingleFetchClassInstance\",178],{\"_38\":39,\"_40\":49,\"_42\":179,\"_44\":181},{\"_51\":180},\"#create-a-cloudflare-worker\",[182],\"Create a Cloudflare Worker\",[\"SingleFetchClassInstance\",184],{\"_38\":39,\"_40\":41,\"_42\":185,\"_44\":186},{},[187],\"Start by creating a new Cloudflare Worker project by running the following command in your terminal. This demo uses a fetch handler with JavaScript, so select those options when prompted.\",[\"SingleFetchClassInstance\",189],{\"_38\":39,\"_40\":139,\"_42\":190,\"_44\":191},{\"_141\":142},[192],\"npx wrangler init planetscale-worker\\n\",[\"SingleFetchClassInstance\",194],{\"_38\":39,\"_40\":41,\"_42\":195,\"_44\":196},{},[197,198,204],\"Next, switch to the directory and run the following commands to install the \",[\"SingleFetchClassInstance\",199],{\"_38\":39,\"_40\":49,\"_42\":200,\"_44\":202},{\"_51\":201},\"/docs/vitess/tutorials/planetscale-serverless-driver\",[203],\"PlanetScale Serverless Driver for JavaScript\",\":\",[\"SingleFetchClassInstance\",206],{\"_38\":39,\"_40\":139,\"_42\":207,\"_44\":208},{\"_141\":142},[209],\"npm install @planetscale/database\\n\",[\"SingleFetchClassInstance\",211],{\"_38\":39,\"_40\":41,\"_42\":212,\"_44\":213},{},[214,215,220],\"Now update the contents of \",[\"SingleFetchClassInstance\",216],{\"_38\":39,\"_40\":132,\"_42\":217,\"_44\":218},{},[219],\"src/index.js\",\" to the following. This will set up the worker to connect to your PlanetScale database, read the rows from it, and display them in your browser when the public worker URL is accessed:\",[\"SingleFetchClassInstance\",222],{\"_38\":39,\"_40\":139,\"_42\":223,\"_44\":225},{\"_141\":224},\"jsx\",[226],\"import { connect } from '@planetscale/database'\\n\\nexport default {\\n  async fetch(request, env) {\\n    const config = {\\n      host: env.DATABASE_HOST,\\n      username: env.DATABASE_USERNAME,\\n      password: env.DATABASE_PASSWORD,\\n      fetch: (url, init) =\u003e {\\n        delete init['cache']\\n        return fetch(url, init)\\n      }\\n    }\\n    const conn = connect(config)\\n\\n    const data = await conn.execute('SELECT * FROM hotels;')\\n    return new Response(JSON.stringify(data.rows), {\\n      status: 200,\\n      headers: {\\n        'Content-Type': 'application/json'\\n      }\\n    })\\n  }\\n}\\n\",[\"SingleFetchClassInstance\",228],{\"_38\":39,\"_40\":41,\"_42\":229,\"_44\":230},{},[231],\"Finally, publish your worker by running the following command in your terminal:\",[\"SingleFetchClassInstance\",233],{\"_38\":39,\"_40\":139,\"_42\":234,\"_44\":235},{\"_141\":142},[236],\"npx wrangler publish\\n\",[\"SingleFetchClassInstance\",238],{\"_38\":39,\"_40\":114,\"_42\":239,\"_44\":241},{\"_116\":240},\"configure-the-planetscale-integration\",[242],[\"SingleFetchClassInstance\",243],{\"_38\":39,\"_40\":49,\"_42\":244,\"_44\":246},{\"_51\":245},\"#configure-the-planetscale-integration\",[247],\"Configure the PlanetScale integration\",[\"SingleFetchClassInstance\",249],{\"_38\":39,\"_40\":41,\"_42\":250,\"_44\":251},{},[252,253,259,260,265,266,271],\"Log into the Cloudflare dashboard and navigate to \",[\"SingleFetchClassInstance\",254],{\"_38\":39,\"_40\":255,\"_42\":256,\"_44\":257},\"strong\",{},[258],\"\\\"Workers\\\"\",\" \u003e \",[\"SingleFetchClassInstance\",261],{\"_38\":39,\"_40\":255,\"_42\":262,\"_44\":263},{},[264],\"\\\"Overview\\\"\",\". You should see a service in the list named \",[\"SingleFetchClassInstance\",267],{\"_38\":39,\"_40\":255,\"_42\":268,\"_44\":269},{},[270],\"\\\"planetscale-worker\\\"\",\". Select it from the list.\",[\"SingleFetchClassInstance\",273],{\"_38\":39,\"_40\":41,\"_42\":274,\"_44\":275},{},[276],[\"SingleFetchClassInstance\",277],{\"_38\":39,\"_40\":278,\"_42\":279,\"_44\":280},\"picture\",{},[281],[\"SingleFetchClassInstance\",282],{\"_38\":39,\"_40\":283,\"_42\":284,\"_44\":290},\"img\",{\"_285\":286,\"_287\":288,\"_74\":289},\"alt\",\"PlanetScale Cloudflare integration wizard - step 1\",\"loading\",\"lazy\",\"/assets/blog/content/integrate-cloudflare-workers-with-planetscale/CleanShot_2023-05-16_at_11.52.48.png\",[],[\"SingleFetchClassInstance\",292],{\"_38\":39,\"_40\":41,\"_42\":293,\"_44\":294},{},[295,296,301,302,307,308,313],\"Next, select the \",[\"SingleFetchClassInstance\",297],{\"_38\":39,\"_40\":255,\"_42\":298,\"_44\":299},{},[300],\"\\\"Settings\\\"\",\" tab, then \",[\"SingleFetchClassInstance\",303],{\"_38\":39,\"_40\":255,\"_42\":304,\"_44\":305},{},[306],\"\\\"Integrations\\\"\",\", and finally \",[\"SingleFetchClassInstance\",309],{\"_38\":39,\"_40\":255,\"_42\":310,\"_44\":311},{},[312],\"\\\"Add Integration\\\"\",\" in the PlanetScale card.\",[\"SingleFetchClassInstance\",315],{\"_38\":39,\"_40\":41,\"_42\":316,\"_44\":317},{},[318],[\"SingleFetchClassInstance\",319],{\"_38\":39,\"_40\":278,\"_42\":320,\"_44\":321},{},[322],[\"SingleFetchClassInstance\",323],{\"_38\":39,\"_40\":283,\"_42\":324,\"_44\":327},{\"_285\":325,\"_287\":288,\"_74\":326},\"PlanetScale Cloudflare integration wizard - step 2\",\"/assets/blog/content/integrate-cloudflare-workers-with-planetscale/CleanShot_2023-05-16_at_11.51.19.png\",[],[\"SingleFetchClassInstance\",329],{\"_38\":39,\"_40\":41,\"_42\":330,\"_44\":331},{},[332,333,338,339,136],\"You’ll be presented with a wizard to configure the integration. Start by clicking \",[\"SingleFetchClassInstance\",334],{\"_38\":39,\"_40\":255,\"_42\":335,\"_44\":336},{},[337],\"\\\"Accept\\\"\",\" under \",[\"SingleFetchClassInstance\",340],{\"_38\":39,\"_40\":255,\"_42\":341,\"_44\":342},{},[343],\"Review and grant permissions\",[\"SingleFetchClassInstance\",345],{\"_38\":39,\"_40\":41,\"_42\":346,\"_44\":347},{},[348],[\"SingleFetchClassInstance\",349],{\"_38\":39,\"_40\":278,\"_42\":350,\"_44\":351},{},[352],[\"SingleFetchClassInstance\",353],{\"_38\":39,\"_40\":283,\"_42\":354,\"_44\":357},{\"_285\":355,\"_287\":288,\"_74\":356},\"PlanetScale Cloudflare integration wizard - step 3\",\"/assets/blog/content/integrate-cloudflare-workers-with-planetscale/CleanShot_2023-05-16_at_11.55.06.png\",[],[\"SingleFetchClassInstance\",359],{\"_38\":39,\"_40\":41,\"_42\":360,\"_44\":361},{},[362,363,368,369,374],\"Under \",[\"SingleFetchClassInstance\",364],{\"_38\":39,\"_40\":255,\"_42\":365,\"_44\":366},{},[367],\"Connect to PlanetScale\",\", click \",[\"SingleFetchClassInstance\",370],{\"_38\":39,\"_40\":255,\"_42\":371,\"_44\":372},{},[373],\"\\\"Connect\\\"\",\" to start the process of connecting your PlanetScale and Cloudflare accounts.\",[\"SingleFetchClassInstance\",376],{\"_38\":39,\"_40\":41,\"_42\":377,\"_44\":378},{},[379],[\"SingleFetchClassInstance\",380],{\"_38\":39,\"_40\":278,\"_42\":381,\"_44\":382},{},[383],[\"SingleFetchClassInstance\",384],{\"_38\":39,\"_40\":283,\"_42\":385,\"_44\":388},{\"_285\":386,\"_287\":288,\"_74\":387},\"PlanetScale Cloudflare integration wizard - step 4\",\"/assets/blog/content/integrate-cloudflare-workers-with-planetscale/CleanShot_2023-05-16_at_11.56.11.png\",[],[\"SingleFetchClassInstance\",390],{\"_38\":39,\"_40\":41,\"_42\":391,\"_44\":392},{},[393],\"A modal will appear allowing you to grant access to your organization, database, and branch. Start by selecting your organization from the list. The org I’m working with is named “ps-deved”.\",[\"SingleFetchClassInstance\",395],{\"_38\":39,\"_40\":41,\"_42\":396,\"_44\":397},{},[398],[\"SingleFetchClassInstance\",399],{\"_38\":39,\"_40\":278,\"_42\":400,\"_44\":401},{},[402],[\"SingleFetchClassInstance\",403],{\"_38\":39,\"_40\":283,\"_42\":404,\"_44\":407},{\"_285\":405,\"_287\":288,\"_74\":406},\"PlanetScale Cloudflare integration wizard - step 5\",\"/assets/blog/content/integrate-cloudflare-workers-with-planetscale/CleanShot_2023-05-16_at_11.59.44.png\",[],[\"SingleFetchClassInstance\",409],{\"_38\":39,\"_40\":41,\"_42\":410,\"_44\":411},{},[412,413,418,419,424,425,136],\"Next, select the “bookings_db” database from the list in the \",[\"SingleFetchClassInstance\",414],{\"_38\":39,\"_40\":255,\"_42\":415,\"_44\":416},{},[417],\"Databases\",\" card, and the “main” branch from the list in the \",[\"SingleFetchClassInstance\",420],{\"_38\":39,\"_40\":255,\"_42\":421,\"_44\":422},{},[423],\"Branches\",\" card. Finally, click \",[\"SingleFetchClassInstance\",426],{\"_38\":39,\"_40\":255,\"_42\":427,\"_44\":428},{},[429],\"\\\"Authorize access\\\"\",[\"SingleFetchClassInstance\",431],{\"_38\":39,\"_40\":41,\"_42\":432,\"_44\":433},{},[434],[\"SingleFetchClassInstance\",435],{\"_38\":39,\"_40\":278,\"_42\":436,\"_44\":437},{},[438],[\"SingleFetchClassInstance\",439],{\"_38\":39,\"_40\":283,\"_42\":440,\"_44\":443},{\"_285\":441,\"_287\":288,\"_74\":442},\"PlanetScale Cloudflare integration wizard - step 6\",\"/assets/blog/content/integrate-cloudflare-workers-with-planetscale/CleanShot_2023-05-16_at_12.00.34.png\",[],[\"SingleFetchClassInstance\",445],{\"_38\":39,\"_40\":41,\"_42\":446,\"_44\":447},{},[448,449,136],\"In the next step on the parent form, select your organization again from the list and click \",[\"SingleFetchClassInstance\",450],{\"_38\":39,\"_40\":255,\"_42\":451,\"_44\":452},{},[453],\"\\\"Continue\\\"\",[\"SingleFetchClassInstance\",455],{\"_38\":39,\"_40\":41,\"_42\":456,\"_44\":457},{},[458],[\"SingleFetchClassInstance\",459],{\"_38\":39,\"_40\":278,\"_42\":460,\"_44\":461},{},[462],[\"SingleFetchClassInstance\",463],{\"_38\":39,\"_40\":283,\"_42\":464,\"_44\":467},{\"_285\":465,\"_287\":288,\"_74\":466},\"PlanetScale Cloudflare integration wizard - step 7\",\"/assets/blog/content/integrate-cloudflare-workers-with-planetscale/CleanShot_2023-05-16_at_12.01.32.png\",[],[\"SingleFetchClassInstance\",469],{\"_38\":39,\"_40\":41,\"_42\":470,\"_44\":471},{},[472,473,479],\"Then, select your database and the \",[\"SingleFetchClassInstance\",474],{\"_38\":39,\"_40\":49,\"_42\":475,\"_44\":477},{\"_51\":476},\"/docs/vitess/security/password-roles\",[478],\"user role\",\" you want the integration to have.\",[\"SingleFetchClassInstance\",481],{\"_38\":39,\"_40\":41,\"_42\":482,\"_44\":483},{},[484],[\"SingleFetchClassInstance\",485],{\"_38\":39,\"_40\":278,\"_42\":486,\"_44\":487},{},[488],[\"SingleFetchClassInstance\",489],{\"_38\":39,\"_40\":283,\"_42\":490,\"_44\":493},{\"_285\":491,\"_287\":288,\"_74\":492},\"PlanetScale Cloudflare integration wizard - step 8\",\"/assets/blog/content/integrate-cloudflare-workers-with-planetscale/CleanShot_2023-05-16_at_12.02.29.png\",[],[\"SingleFetchClassInstance\",495],{\"_38\":39,\"_40\":41,\"_42\":496,\"_44\":497},{},[498,499,136],\"Next, select the “main” branch from the list and click \",[\"SingleFetchClassInstance\",500],{\"_38\":39,\"_40\":255,\"_42\":501,\"_44\":502},{},[453],[\"SingleFetchClassInstance\",504],{\"_38\":39,\"_40\":41,\"_42\":505,\"_44\":506},{},[507],[\"SingleFetchClassInstance\",508],{\"_38\":39,\"_40\":278,\"_42\":509,\"_44\":510},{},[511],[\"SingleFetchClassInstance\",512],{\"_38\":39,\"_40\":283,\"_42\":513,\"_44\":516},{\"_285\":514,\"_287\":288,\"_74\":515},\"PlanetScale Cloudflare integration wizard - step 9\",\"/assets/blog/content/integrate-cloudflare-workers-with-planetscale/CleanShot_2023-05-16_at_12.03.07.png\",[],[\"SingleFetchClassInstance\",518],{\"_38\":39,\"_40\":41,\"_42\":519,\"_44\":520},{},[521,522,526],\"Finally, you’ll be given the option to rename the secrets that will be configured on your behalf. These can be left as is. Click \",[\"SingleFetchClassInstance\",523],{\"_38\":39,\"_40\":255,\"_42\":524,\"_44\":525},{},[312],\" to complete the process.\",[\"SingleFetchClassInstance\",528],{\"_38\":39,\"_40\":41,\"_42\":529,\"_44\":530},{},[531],[\"SingleFetchClassInstance\",532],{\"_38\":39,\"_40\":278,\"_42\":533,\"_44\":534},{},[535],[\"SingleFetchClassInstance\",536],{\"_38\":39,\"_40\":283,\"_42\":537,\"_44\":540},{\"_285\":538,\"_287\":288,\"_74\":539},\"\",\"/assets/blog/content/integrate-cloudflare-workers-with-planetscale/CleanShot_2023-05-16_at_13.33.05.png\",[],[\"SingleFetchClassInstance\",542],{\"_38\":39,\"_40\":114,\"_42\":543,\"_44\":545},{\"_116\":544},\"test-the-integration\",[546],[\"SingleFetchClassInstance\",547],{\"_38\":39,\"_40\":49,\"_42\":548,\"_44\":550},{\"_51\":549},\"#test-the-integration\",[551],\"Test the integration\",[\"SingleFetchClassInstance\",553],{\"_38\":39,\"_40\":41,\"_42\":554,\"_44\":555},{},[556],\"Back in the overview of the worker, there is a preview URL that you can use to open a new tab in your browser that runs the worker and displays the results. Once you’ve located the preview URL, click it to test the worker.\",[\"SingleFetchClassInstance\",558],{\"_38\":39,\"_40\":41,\"_42\":559,\"_44\":560},{},[561],[\"SingleFetchClassInstance\",562],{\"_38\":39,\"_40\":278,\"_42\":563,\"_44\":564},{},[565],[\"SingleFetchClassInstance\",566],{\"_38\":39,\"_40\":283,\"_42\":567,\"_44\":569},{\"_285\":538,\"_287\":288,\"_74\":568},\"/assets/blog/content/integrate-cloudflare-workers-with-planetscale/CleanShot_2023-05-16_at_13.03.41.png\",[],[\"SingleFetchClassInstance\",571],{\"_38\":39,\"_40\":114,\"_42\":572,\"_44\":574},{\"_116\":573},\"conclusion\",[575],[\"SingleFetchClassInstance\",576],{\"_38\":39,\"_40\":49,\"_42\":577,\"_44\":579},{\"_51\":578},\"#conclusion\",[580],\"Conclusion\",[\"SingleFetchClassInstance\",582],{\"_38\":39,\"_40\":41,\"_42\":583,\"_44\":584},{},[585,586,136],\"With the new PlanetScale Integration in Cloudflare Workers, you can now easily create credentials without ever having to handle them manually, making it both easier and more secure when using the platforms together. For more information, check out the \",[\"SingleFetchClassInstance\",587],{\"_38\":39,\"_40\":49,\"_42\":588,\"_44\":590},{\"_51\":589},\"https://developers.cloudflare.com/workers/learning/integrations/databases/#planetscale\",[591],\"Cloudflare database integrations documentation\",[\"SingleFetchClassInstance\",593],{\"_38\":39,\"_40\":41,\"_42\":594,\"_44\":595},{},[596,597,603,604,610],\"Have you ever built anything with PlanetScale and Cloudflare? Share it on Twitter and be sure to tag \",[\"SingleFetchClassInstance\",598],{\"_38\":39,\"_40\":49,\"_42\":599,\"_44\":601},{\"_51\":600},\"https://twitter.com/planetscale\",[602],\"@planetscale\",\" and \",[\"SingleFetchClassInstance\",605],{\"_38\":39,\"_40\":49,\"_42\":606,\"_44\":608},{\"_51\":607},\"https://twitter.com/cloudflaredev\",[609],\"@cloudflaredev\",\"!\",\"body_text\",\"Over the past several weeks, we’ve been working with Cloudflare on a direct integration between our services to make it easier and more secure when connecting to your PlanetScale database from Cloudflare Workers. With the integration enabled, Cloudflare will automatically connect to your PlanetScale database to generate credentials that are managed by Cloudflare. Read on to learn how you can use the new integration with your Cloudflare Workers, or check out this video on our YouTube channel where we cover it as well!\\nBefore you get started, make sure you have the following:\\nA PlanetScale account\\nThe pscale CLI installed and configured\\nThe latest version of NodeJS installed\\nSet up the database\\nStart by creating a database in your PlanetScale account named bookings_db.pscale database create bookings_db\\n\\nNext, use the pscale shell command to open a connection to the main branch of the new database.pscale shell bookings_db main\\n\\nFinally, run the following two commands to create a table in the database and populate it with some data.CREATE TABLE hotels (\\n  id INT UNSIGNED PRIMARY KEY AUTO_INCREMENT,\\n  name VARCHAR(50) NOT NULL,\\n  address VARCHAR(50) NOT NULL,\\n  stars FLOAT(2) UNSIGNED\\n);\\n\\nINSERT INTO hotels (name, address, stars) VALUES\\n  ('Hotel California', '1967 Can Never Leave Ln, San Fancisco CA, 94016', 7.6),\\n  ('The Galt House', '140 N Fourth St, Louisville, KY 40202', 8.0);\\n\\nCreate a Cloudflare Worker\\nStart by creating a new Cloudflare Worker project by running the following command in your terminal. This demo uses a fetch handler with JavaScript, so select those options when prompted.npx wrangler init planetscale-worker\\n\\nNext, switch to the directory and run the following commands to install the PlanetScale Serverless Driver for JavaScript:npm install @planetscale/database\\n\\nNow update the contents of src/index.js to the following. This will set up the worker to connect to your PlanetScale database, read the rows from it, and display them in your browser when the public worker URL is accessed:import { connect } from '@planetscale/database'\\n\\nexport default {\\n  async fetch(request, env) {\\n    const config = {\\n      host: env.DATABASE_HOST,\\n      username: env.DATABASE_USERNAME,\\n      password: env.DATABASE_PASSWORD,\\n      fetch: (url, init) =\u003e {\\n        delete init['cache']\\n        return fetch(url, init)\\n      }\\n    }\\n    const conn = connect(config)\\n\\n    const data = await conn.execute('SELECT * FROM hotels;')\\n    return new Response(JSON.stringify(data.rows), {\\n      status: 200,\\n      headers: {\\n        'Content-Type': 'application/json'\\n      }\\n    })\\n  }\\n}\\n\\nFinally, publish your worker by running the following command in your terminal:npx wrangler publish\\n\\nConfigure the PlanetScale integration\\nLog into the Cloudflare dashboard and navigate to \\\"Workers\\\" \u003e \\\"Overview\\\". You should see a service in the list named \\\"planetscale-worker\\\". Select it from the list.\\n\\nNext, select the \\\"Settings\\\" tab, then \\\"Integrations\\\", and finally \\\"Add Integration\\\" in the PlanetScale card.\\n\\nYou’ll be presented with a wizard to configure the integration. Start by clicking \\\"Accept\\\" under Review and grant permissions.\\n\\nUnder Connect to PlanetScale, click \\\"Connect\\\" to start the process of connecting your PlanetScale and Cloudflare accounts.\\n\\nA modal will appear allowing you to grant access to your organization, database, and branch. Start by selecting your organization from the list. The org I’m working with is named “ps-deved”.\\n\\nNext, select the “bookings_db” database from the list in the Databases card, and the “main” branch from the list in the Branches card. Finally, click \\\"Authorize access\\\".\\n\\nIn the next step on the parent form, select your organization again from the list and click \\\"Continue\\\".\\n\\nThen, select your database and the user role you want the integration to have.\\n\\nNext, select the “main” branch from the list and click \\\"Continue\\\".\\n\\nFinally, you’ll be given the option to rename the secrets that will be configured on your behalf. These can be left as is. Click \\\"Add Integration\\\" to complete the process.\\n\\nTest the integration\\nBack in the overview of the worker, there is a preview URL that you can use to open a new tab in your browser that runs the worker and displays the results. Once you’ve located the preview URL, click it to test the worker.\\n\\nConclusion\\nWith the new PlanetScale Integration in Cloudflare Workers, you can now easily create credentials without ever having to handle them manually, making it both easier and more secure when using the platforms together. For more information, check out the Cloudflare database integrations documentation.\\nHave you ever built anything with PlanetScale and Cloudflare? Share it on Twitter and be sure to tag @planetscale and @cloudflaredev!\",\"aside\",\"toc\",[616,620,622,624,626],{\"_44\":617,\"_116\":117,\"_618\":619,\"_76\":124},[],\"level\",2,{\"_44\":621,\"_116\":175,\"_618\":619,\"_76\":182},[],{\"_44\":623,\"_116\":240,\"_618\":619,\"_76\":247},[],{\"_44\":625,\"_116\":544,\"_618\":619,\"_76\":551},[],{\"_44\":627,\"_116\":573,\"_618\":619,\"_76\":580},[],\"authors\",[630],\"Brian Morrison II\",\"categories\",[633],\"tutorials\",\"excerpt\",\"A guide on how to natively integrate your PlanetScale database into Cloudflare workers easily and securely.\",\"createdAt\",\"2023-05-17T12:00:00Z\",\"meta\",{\"_640\":641,\"_642\":635,\"_643\":644,\"_76\":77},\"canonical\",\"https://planetscale.com/blog/integrate-cloudflare-workers-with-planetscale\",\"description\",\"image\",\"/assets/integrate-cloudflare-workers-with-planetscale-social-CHrcioVB.png\",\"https://planetscale.com\",\"routes/blog\",\"actionData\",\"errors\"]\n");</script><!--$--><script nonce="2OMH2AkgDpKZYl8kvjGSV+DH+quuUexfTZ9tbK/TqjY=">window.__remixContext.streamController.close();</script><!--/$--><!--/$-->